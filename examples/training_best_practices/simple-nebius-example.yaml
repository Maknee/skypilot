# Simple example using Nebius network attached disk
name: nebius-training-example

resources:
  infra: k8s  # or kubernetes
  cpus: 8+
  memory: 64+
  accelerators: A100:1  # Adjust based on Nebius availability

# Mount the network attached volume
volumes:
  /mnt/training_data: training-data-volume

setup: |
  # Install required packages
  pip install torch transformers datasets
  
  # Create subdirectories on the network disk
  mkdir -p /mnt/training_data/models
  mkdir -p /mnt/training_data/datasets
  mkdir -p /mnt/training_data/checkpoints
  
  echo "Network attached disk mounted at /mnt/training_data"
  df -h /mnt/training_data

run: |
  # Example: Download a model to the network disk
  cd /mnt/training_data/models
  
  # Your training code here - data will persist on the network disk
  echo "Training data and models will be stored on persistent network disk"
  echo "Available space:"
  df -h /mnt/training_data
  
  # Example: Save checkpoints to network disk
  # python train.py --checkpoint_dir /mnt/training_data/checkpoints 